jQuery(document).ready(function(a){var t=function(t,n){var o={add_donation_to_cart:-1,ywcds_amount:n,action:yith_wcds_frontend_l10n.actions.add_donation_to_cart},r=t.parents(".ywcds_form_container");a.ajax({type:"GET",url:yith_wcds_frontend_l10n.ajax_url,data:o,dataType:"json",beforeSend:function(){r.find(".ajax-loading").css("visibility","visible")},complete:function(){r.find(".ajax-loading").css("visibility","hidden")},success:function(a){var n=window.location.toString();n=n.replace("add-to-cart","added-to-cart");var o=r.find(".ywcds_message");if(a.fragments){e(t,n,a),o.removeClass("woocommerce-error"),"undefined"!=typeof ywcds_params&&"undefined"!=typeof ywcds_params.donation_in_cart&&(ywcds_params.donation_in_cart=1);var d="";wc_add_to_cart_params.is_cart||0!==t.parent().find(".added_to_cart").size()||(d=' <a href="'+wc_add_to_cart_params.cart_url+'" class="added_to_cart wc-forward" title="'+wc_add_to_cart_params.i18n_view_cart+'">'+wc_add_to_cart_params.i18n_view_cart+"</a>"),o.html(yith_wcds_frontend_l10n.messages.success+d)}else{var s=(a.result,a.message);r.find(".ywcds_amount").css("border","1px solid red"),o.addClass("woocommerce-error"),o.html(s)}o.show()}})},e=function(t,e,n){fragments=n.fragments,cart_hash=n.cart_has,fragments&&a.each(fragments,function(t,e){a(t).addClass("updating")}),a(".shop_table.cart, .updating, .cart_totals").fadeTo("400","0.6").block({message:null,overlayCSS:{opacity:.6}}),t.addClass("added"),fragments&&a.each(fragments,function(t,e){a(t).replaceWith(e)}),a(".widget_shopping_cart, .updating").stop(!0).css("opacity","1").unblock(),a(".shop_table.cart").load(e+" .shop_table.cart:eq(0) > *",function(){a(".shop_table.cart").stop(!0).css("opacity","1").unblock(),a("body").trigger("cart_page_refreshed")}),a(".cart_totals").load(e+" .cart_totals:eq(0) > *",function(){a(".cart_totals").stop(!0).css("opacity","1").unblock()})};a(document).on("click",".ywcds_submit_widget",function(e){var n=a(this),o=n.parents("#ywcds_add_donation_form"),r=o.find(".ywcds_amount").val();return e.preventDefault(),t(n,r),!1}),a(document).on("click",".single_add_to_cart_button",function(t){var e=(a(this),a(document).find("#ywcds_add_donation_form_single_product")),o=e.find(".ywcds_amount_single_product"),r=e.data("donation_is_obligatory"),d=e.data("min_donation"),s=e.data("max_donation"),c=a(document).find(".woocommerce-breadcrumb"),_='<div class="woocommerce-error">';if(e.length){a(".woocommerce-error, .woocommerce-message").remove();var i=n(o.val(),d,s,r);if("ok"!=i){switch(i){case"nan":_+=yith_wcds_frontend_l10n.messages.no_number+"</div>";break;case"less_zero":_+=yith_wcds_frontend_l10n.messages.negative+"</div>";break;case"empty":_+=yith_wcds_frontend_l10n.messages.obligatory+"</div>";break;case"min":_+=yith_wcds_frontend_l10n.messages.min_don+"</div>";break;case"max":_+=yith_wcds_frontend_l10n.messages.max_don+"</div>"}return c.after(_),a(document).scrollTop(0),t.preventDefault(),!1}}});var n=function(a,t,e,n){var o=new RegExp("[^-0-9%\\"+yith_wcds_frontend_l10n.mon_decimal_point+"]+","gi"),r=a.replace(o,"");if(a!==r)return"nan";if(""==a&&n)return"empty";if(r=r.replace(yith_wcds_frontend_l10n.mon_decimal_point,"."),a=parseFloat(r),0>a)return"less_zero";if(""!=a){if(""!=t&&(t=""+t+"".replace(yith_wcds_frontend_l10n.mon_decimal_point,"."),t=parseFloat(t),t>a))return"min";if(""!=e&&(e=""+e+"".replace(yith_wcds_frontend_l10n.mon_decimal_point,"."),e=parseFloat(e),a>e))return"max"}return"ok"}});